<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)

           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Git Introduction</title>

    <meta charset='utf-8'>
    <script
      src='src/slides.js'></script>
  </head>

  <style>
    /* Your individual styles here, or just use inline styles if that’s
       what you want. */


  </style>

  <body style='display: none'>

    <section class='slides layout-widescreen template-default'>

      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->


      <article>
      <h1>
      Git approaching
      </h1>
      <p>
      How to start using git - Jun 31 2012
      </p>
      </article>

      <article>
        <q>
          Git --local-branching-on-the-cheap
        </q>
        <div class='author'>
          <a target='_blank' href="http://git-scm.com/">http://git-scm.com/</a>
        </div>
      </article>

      <article>
      <h1>Git</h1>
      <p>
        Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.
      </p>
      </article>

      <article>
      <h1>Git</h1>
      <p>
        Git is <a target='_blank' href="http://git-scm.com/documentation">easy to learn</a> and has a <a target='_blank' href="http://git-scm.com/about/small-and-fast">tiny footprint with lightning fast performance</a>. It outclasses SCM tools like Subversion, CVS, Perforce, and ClearCase with features like <a target='_blank' href="http://git-scm.com/about/branching-and-merging">cheap local branching</a>, convenient <a target='_blank' href="http://git-scm.com/about/staging-area">staging areas</a>, and <a target='_blank' href="http://git-scm.com/about/distributed">multiple workflows</a>.
      </p>
      </article>


      <article class='smaller'>
      <h3>In the beginning...</h3>
      <ul>
        <li>
          <p>
          Download and install git
          </p>
          <p>
          <a target='_blank' href="http://git-scm.com/downloads">http://git-scm.com/downloads</a>
          </p>
        </li>
        <li>
        Configure...
<pre>
$ <span class='lit'>git</span> config --global user.name "Luca Lanziani"
$ <span class='lit'>git</span> config --global user.email luca@filerock.com
$ <span class='lit'>git</span> config --global core.excludesfile gitproject/.gitignore_global
</pre>  
        </li>
        <li>
        Init your project
<pre>
$ gitproject > tar xvzf yourproject.tar.gz -C workingdir
$ gitproject > cd workingdir
$ workingdir > <span class='lit'>git</span> init 
</pre>
        </li>
      </ul>
      </article>

      <article class='smaller'>
        <h3>Working directory</h3>
        <p>
        <code>git init</code> command, git will add a <code>.git/</code> directory into your working dir.
        </p>
        <pre>
.git/
├── branches
├── config
├── description
├── HEAD
├── hooks
│   ├── applypatch-msg.sample
│   ├── commit-msg.sample
│   ├── post-update.sample
│   ├── pre-applypatch.sample
│   ├── pre-commit.sample
│   ├── prepare-commit-msg.sample
│   ├── pre-rebase.sample
│   └── update.sample
├── info
│   └── exclude
├── objects
│   ├── info
│   └── pack
└── refs
    ├── heads
    └── tags
        </pre>
      </article>

      <article>
      <h3>Repository and Staging area</h3>
      <br>
      <p>Unlike the other systems, Git has something called the <strong>"staging area"</strong> or <strong>"index"</strong>. This is an intermediate area where commits can be formatted and reviewed before completing the commit.</p>
      <p>
          <img class='centered' src='images/index1.png'>
      </p>
      </article>

      <article>
      <h3>The ignore file</h3>
      <ul>
        <li>
        .gitignore patterns
<pre>
# This is a comment
# git will ignore files/dirs who match following patterns

.*            # every dotted file
!.gitignore   # but not .gitignore
*.py[co]      # every file ending with .pyc or .pyo 
.svn/         # svn dir
</pre>
        </li>
        <li>
        .gitignore file location
        <pre>
core.excludesfile = path      #private per user
workingdir/.git/info/exclude  #private per repository
workingdir/.gitignore         #public per repository
</pre>
        </li>
      </ul>

      </article>

      <article class="smaller">
        <pre>
> <span class='lit'>git</span> help

The most commonly used git commands are:
   add        Add file contents to the index
   bisect     Find by binary search the change that introduced a bug
   branch     List, create, or delete branches
   checkout   Checkout a branch or paths to the working tree
   clone      Clone a repository into a new directory
   commit     Record changes to the repository
   diff       Show changes between commits, commit and working tree, etc
   fetch      Download objects and refs from another repository
   grep       Print lines matching a pattern
   init       Create an empty git repository or reinitialize an existing one
   log        Show commit logs
   merge      Join two or more development histories together
   mv         Move or rename a file, a directory, or a symlink
   pull       Fetch from and merge with another repository or a local branch
   push       Update remote refs along with associated objects
   rebase     Forward-port local commits to the updated upstream head
   reset      Reset current HEAD to the specified state
   rm         Remove files from the working tree and from the index
   show       Show various types of objects
   status     Show the working tree status
   tag        Create, list, delete or verify a tag object signed with GPG

See 'git help &lt;command&gt;' for more information on a specific command.</pre>
      </article>

      <article class='smaller'>
        <h3>
          Let's dance
        </h3>
      <pre>
$ ~> mkdir gitproject && cd gitproject
$ gitproject> <span class='lit'>git</span> init
$ gitproject> touch file1 file2 file3
$ gitproject> <span class='lit'>git</span> add file1 file2
$ gitproject> <span class='lit'>git</span> status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached &lt;file&gt;..." to unstage)
#
#       new file:   file1
#       new file:   file2
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#       file3

$ gitproject> <span class='lit'>git</span> branch

$ gitproject> <span class='lit'>git</span> log
fatal: bad default revision 'HEAD'
      </pre>
      </article>

      <article class='smaller'>
        <h3>
          Let's dance 2
        </h3>
<p>
</p>
      <pre>
$ gitproject> <span class='lit'>git</span> commit -m 'first file added' file2
[master (root-commit) 171236f] first file added
 0 files changed
 create mode 100644 file2

$ gitproject> <span class='lit'>git</span> log
commit 171236fb05aa99bfe0deaef8311327d18c157b74
Author: Luca &lt;luca@filerock.com&gt;
Date:   Tue Jul 31 12:43:27 2012 +0200

    first file added

$ gitproject> <span class='lit'>git</span> branch
* master
      </pre>
      </article>

      <article class='smaller'>
        <h3>
          Let's dance 3
        </h3>
<p>
</p>
      <pre>
$ gitproject> echo ciao > file1
$ gitproject> <span class='lit'>git</span> status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD &lt;file&gt;..." to unstage)
#
#       new file:   file1
#
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#       modified:   file1
#
# Untracked files:
#   (use "git add &lt;file&gt;..." to include in what will be committed)
#
#       file3
$ gitproject> <span class='lit'>git</span> commit #file1 but not the last changes
$ gitproject> <span class='lit'>git</span> commit -a #file1 with all changes as git add file1 + git commit
$ gitproject> <span class='lit'>git</span> commit -a -m 'file1 added with changes'
[master 7c3de37] file1 added with changes
 1 file changed, 1 insertion(+)
 create mode 100644 file1
      </pre>
      </article>

      <article class='smaller'>
        <h3>
          Branching
        </h3>
<p>
</p>
      <pre>
$ gitproject> <span class='lit'>git</span> branch experimental
$ gitproject> <span class='lit'>git</span> branch
  experimental
* master

$ gitproject> <span class='lit'>git</span> checkout experimental
Switched to branch 'experimental'

$ gitproject> <span class='lit'>git</span> branch
* experimental
  master

$ gitproject> echo mondo >> file1
$ gitproject> <span class='lit'>git</span> commit -a -m 'ciao mondo in file1'
[experimental 6ce52c1] ciao mondo in file1
 1 file changed, 1 insertion(+)

$ gitproject> <span class='lit'>git</span> checkout master
Switched to branch 'master'

$ gitproject> cat file1 
ciao
</pre>
      </article>      

      <article class='smaller'>
        <h3>
          Merge
        </h3>
<p>
</p>
      <pre>
$ gitproject> echo mondo1 >> file1
$ gitproject> <span class='lit'>git</span> commit -a -m 'mondo1 in file1'
[master 934898d] mondo1 in file1
 1 file changed, 1 insertion(+)

$ gitproject> <span class='lit'>git</span> merge experimental 
Auto-merging file1
CONFLICT (content): Merge conflict in file1
Automatic merge failed; fix conflicts and then commit the result.

$ gitproject> <span class='lit'>git</span> diff
diff --cc file1
index 3570a53,9aee450..0000000
--- a/file1
+++ b/file1
@@@ -1,2 -1,2 +1,6 @@@
  ciao
++<<<<<<< HEAD
 +mondo1
++=======
+ mondo
++>>>>>>> experimental

$ gitproject> <span class='lit'>git</span> commit -a -m "Merge branch 'experimental'"
</pre>
      </article>    

      <article class='smaller'>
        <h3>
          Logs
        </h3>
      <pre>
$ gitproject> <span class='lit'>git</span> log --graph 
*   commit a8d8a27ae83c158aae3b040afef0f9fbcaefc5c3
|\  Merge: 07783ee 5bd0417
| | Author: Luca &lt;luca@filerock.com&gt;
| | Date:   Tue Jul 31 13:46:11 2012 +0200
| | 
| |     Merge branch 'experimental'
| |   
| * commit 5bd04170e1593444ad33d56394b636084d54e5fa
| | Author: Luca &lt;luca@filerock.com&gt;
| | Date:   Tue Jul 31 13:43:45 2012 +0200
| | 
| |     mondo in file1
| |   
* | commit 07783ee1cf972f8f572b683d85e7fd250961b089
|/  Author: Luca &lt;luca@filerock.com&gt;
|   Date:   Tue Jul 31 13:46:06 2012 +0200
|   
|       ciao mondo file1
|   
* commit daf1eb102a3a9c606f4323451dccf0bba0901310
  Author: Luca &lt;luca@filerock.com&gt;
  Date:   Tue Jul 31 12:55:15 2012 +0200
  
      first file added
</pre>
      </article> 
      

      <article>
        <h3>
        Remote
        </h3>
        <p>
          From the new project
        </p>
<pre>
$ repo> <span class='lit'>git</span> remote add origin git@github.com:filerock/repo.git
$ repo> <span class='lit'>git</span> push -u origin master
</pre>
        <p>
          Clone the project
        </p>
<pre>
$ ~> <span class='lit'>git</span> clone git@github.com:filerock/repo.git
$ ~> cd repo
</pre>
      </article>

      <article>
        <h3>
        Pull & Push
        </h3>
        
        <ul>
          <li>
            <span class="red">pull</span>: fetch from and merge with another repository or a local branch
          </li>
<pre>
$ gitproject> <span class='lit'>git</span> pull repository src_branch:dst_branch
Ex. <span class='lit'>git</span> pull origin master
</pre>
          <li>
            <span class="red">push</span>: update remote refs along with associated objects
          </li>
<pre>
$ gitproject> <span class='lit'>git</span> push repository src_branch:dst_branch
Ex. <span class='lit'>git</span> push origin master
</pre>
        </ul>
      </article>

      <article>
        <h3>
        Local Tests
        </h3>
        <p>
          Set the environment
        </p>
      
<pre>
$ ~> mkdir GitTests && cd GitTests
$ GitTests> <span class='lit'>git</span> init originRepo && cd originRepo
$ originRepo> echo Hello > file1.txt 
$ originRepo> <span class='lit'>git</span> add file1.txt
$ originRepo> <span class='lit'>git</span> commit -m "first commit"
$ originRepo> cd ..
$ GitTests> <span class='lit'>git</span> clone originRepo clonedRepo && cd clonedRepo
$ clonedRepo> echo World >> file1.txt 
$ clonedRepo> <span class='lit'>git</span> commit -am 'Hello World'
$ clonedRepo> cd ../originRepo/
$ originRepo> echo World! >> file1.txt
$ originRepo> <span class='lit'>git</span> commit -am 'Hello World!'
$ originRepo> cd ../clonedRepo/
</pre>
      </article>

      <article>
        <h3>
        Local Tests
        </h3>
        <p>
          Set the environment (cut & paste)
        </p>
      
<pre>
mkdir GitTests && cd GitTests
<span class='lit'>git</span> init originRepo && cd originRepo
echo Hello > file1.txt 
<span class='lit'>git</span> add file1.txt
<span class='lit'>git</span> commit -m "first commit"
cd ..
<span class='lit'>git</span> clone originRepo clonedRepo && cd clonedRepo
echo World >> file1.txt 
<span class='lit'>git</span> commit -am 'Hello World'
cd ../originRepo/
echo World! >> file1.txt
<span class='lit'>git</span> commit -am 'Hello World1'
cd ../clonedRepo/
</pre>
      </article>

      <article>
        <h3>
        Local Tests (What happened)
        </h3>
<pre>
$ clonedRepo> cat .git/config
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = /home/mosca/GitTests/originRepo
[branch "master"]
        remote = origin
        merge = refs/heads/master
</pre>
      </article>

      <article class='smaller'>
        <h3>
        Local Tests (push to origin)
        </h3>
<pre>
$ clonedRepo> <span class='lit'>git</span> push origin master:master
To /home/mosca/GitTests/originRepo
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to '/home/mosca/GitTests/originRepo'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

$ clonedRepo> <span class='lit'>git</span> pull
remote: Counting objects: 5, done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From /home/mosca/GitTests/originRepo
   904888a..ed1d4d7  master     -> origin/master
Auto-merging file1.txt
CONFLICT (content): Merge conflict in file1.txt
Automatic merge failed; fix conflicts and then commit the result.
</pre>


      </article>

      <article class='smaller'>
        <h3>
        Local Tests (Show diff)
        </h3>
<pre>
$ clonedRepo> <span class='lit'>git</span> status
# On branch master
# Your branch and 'origin/master' have diverged,
# and have 1 and 1 different commit each, respectively.
#
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#       both modified:      file1.txt
#
no changes added to commit (use "git add" and/or "git commit -a")

$ clonedRepo> <span class='lit'>git</span> diff
diff --cc file1.txt
index f9264f7,cdf9598..0000000
--- a/file1.txt
+++ b/file1.txt
@@@ -1,2 -1,2 +1,6 @@@
  Hello
++<<<<<<< HEAD
 +World
++=======
+ World!
++>>>>>>> ed1d4d70bc7cbbece4035b4c42c506599c76864c
</pre>
      </article>

      <article class='smaller'>
        <h3>
        Local Tests (Merge)
        </h3>
<pre>
$ clonedRepo> <span class='lit'>git</span> mergetool 
merge tool candidates: opendiff kdiff3 tkdiff xxdiff meld tortoisemerge gvimdiff \
diffuse ecmerge p4merge araxis bc3 emerge vimdiff
Merging:
file1.txt

Normal merge conflict for 'file1.txt':
  {local}: modified file
  {remote}: modified file
Hit return to start merge resolution tool (kdiff3): 

$ clonedRepo> <span class='lit'>git</span> diff

$ clonedRepo> <span class='lit'>git</span> commit -m 'Merge with origin done!'
[master 0031fe0] Merge with origin done!
</pre>
      </article>

      <article class='smaller'>
        <h3>
        Local Tests (Push)
        </h3>
<pre>
$ clonedRepo> <span class='lit'>git</span> push origin master:master
Counting objects: 8, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (4/4), 434 bytes, done.
Total 4 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (4/4), done.
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To /home/mosca/GitTests/originRepo
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to '/home/mosca/GitTests/originRepo'
</pre>
      </article>


      <article class='smaller'>
        <h3>
        Local Tests (Push)
        </h3>
<pre>
$ clonedRepo> <span class='lit'>git</span> push origin master:cloned
Counting objects: 8, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (4/4), 434 bytes, done.
Total 4 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (4/4), done.
To /home/mosca/GitTests/originRepo
 * [new branch]      master -> cloned

$ clonedRepo> cd ../originRepo/
$ originRepo> <span class='lit'>git</span> branch 
  cloned
* master

$ originRepo> <span class='lit'>git</span> merge cloned 
Updating ed1d4d7..0031fe0
Fast-forward

</pre>
      </article>


      <article class='smaller'>
        <h3>
          Local Tests (Done) 
        </h3>
        <pre>
$ originRepo> <span class='lit'>git</span> log
commit 0031fe0a997f0f514f2c38a3e5f4640f616131bf
Merge: 7942b4b ed1d4d7
Author: Luca &lt;luca@filerock.com&gt;
Date:   Wed Aug 1 08:58:55 2012 +0200

    Merge with origin done!

commit 7942b4b2bcdeb6cd6cc42540e282ec741c870928
Author: Luca &lt;luca@filerock.com&gt;
Date:   Wed Aug 1 08:42:39 2012 +0200

    Hello World

commit ed1d4d70bc7cbbece4035b4c42c506599c76864c
Author: Luca &lt;luca@filerock.com&gt;
Date:   Wed Aug 1 08:42:39 2012 +0200

    Hello World1

commit 904888af21e93cc26adc9f192e6b019f40426b1e
Author: Luca &lt;luca@filerock.com&gt;
Date:   Wed Aug 1 08:42:39 2012 +0200

    first commit</pre>
      </article>

      <article>
        <h3>Branching Workflows</h3>
        <p>Many Git developers have a workflow that embraces this approach, such as having only code that is entirely stable in their master branch — possibly only code that has been or will be released.</p>
        <p>
          <img class='centered' src='images/branchstrategy.png'>
        </p>
        <p>refs: <a target='_blank' href="http://git-scm.com/book/en/Git-Branching-Branching-Workflows">http://git-scm.com/book/en/Git-Branching-Branching-Workflows</a>
        </p>
      </article>

      <article class='smaller'>
        <h3>Tips</h3>
        <ul>
          <li>Guis <a target='_blank' href="http://git-scm.com/downloads/guis">http://git-scm.com/downloads/guis</a></li>
          <li>
           Color
           <pre>git config --global color.ui "auto"</pre> 
          </li>
          <li>
            Branch on prompt (strongly recommended)
          <pre>
#THIS WILL WORK ONLY IF YOU HAVE INSTALLED "GIT BASH COMPLETION"
#WHICH DEFINE __git_ps1 FUNCTION
export PS1='$(__git_ps1 "(%s)") '
</pre>
          </li>
          <li>
            Aliases
<pre>
$ clonedRepo> <span class='lit'>git</span> config [--global] alias.st status
</pre>
          </li>
        </ul>
        
      </article>

    </section>

  </body>
</html>
